////
/// Text utilities
/// @group utilities
/// @author Benjamin Fleming
////


// Settings
// --------

/// Controls whether styles in this file (text) are generated.
/// @type Boolean
$hf-generate-text: $hf-generate !default;


// Mixins
// ------

/// Turns an element into a textbox
/// @require {function} hf-nth-loop
/// @require {function} hf-sum
/// @param {Number} $font-size [1em]
/// @param {Number | List} $padding [0]
/// @param {Number | List} $border-width [0]
/// @param {Number} $line-height [1]
/// @param {Boolean} $multiline [false]
/// @output
@mixin hf-textbox(
	$font-size: 1em,
	$padding: 0,
	$border-width: 0,
	$line-height: 1,
	$multiline: false
) {
	$line-height: if($multiline, $line-height, 1);

	//
	// Calculate the line height offset
	//

	@if $line-height != 1 and $line-height != 1em and $line-height != 100% {

		$padding-top:    hf-nth-loop($padding, 1);
		$padding-right:  hf-nth-loop($padding, 2);
		$padding-bottom: hf-nth-loop($padding, 3);
		$padding-left:   hf-nth-loop($padding, 4);
		$line-height-bleed: ($font-size / 2), ($line-height / -2);

		// Add a fallback for browsers that don't support CSS3 calc()
		$padding-top-fb:    hf-sum((unit($padding-top):    $font-size), $padding-top,    $line-height-bleed);
		$padding-bottom-fb: hf-sum((unit($padding-bottom): $font-size), $padding-bottom, $line-height-bleed);
		padding: $padding-top-fb $padding-right $padding-bottom-fb $padding-left;

		$padding-top:    hf-sum('calc', $padding-top,    $line-height-bleed);
		$padding-bottom: hf-sum('calc', $padding-bottom, $line-height-bleed);
		$padding: $padding-top $padding-right $padding-bottom $padding-left;
	}

	//
	// Apply styles
	//

	font-size: $font-size;
	padding: $padding;
	border-width: $border-width;
	line-height: $line-height;

	//
	// Apply single line styles
	//

	@if not $multiline {

		$height-values: (
			hf-nth-loop($padding,      1), hf-nth-loop($padding,      3),
			hf-nth-loop($border-width, 1), hf-nth-loop($border-width, 3),
			$line-height * 1em
		);

		height: hf-sum( ('em': $font-size), $height-values);
		height: hf-sum('calc', $height-values);
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
	}
}


// Styles
// ------

@if $hf-generate-text {

	@each $text-align in 'left', 'center', 'right', 'justify' {

		@include hf-utility('text-' + $text-align) {
			text-align: $text-align;
		}
	}
}